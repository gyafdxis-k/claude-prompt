# Claude Dev Assistant 使用指南

## 🚀 快速开始

### 1. 启动应用

```bash
npm run dev
```

应用将在 http://localhost:3000 启动

### 2. 配置 API Key

1. 点击右上角的 "⚙️ 设置" 按钮
2. 输入你的 Claude API Key (从 https://console.anthropic.com/ 获取)
3. 点击"保存"

### 3. 开始使用

1. **选择模版**: 从左侧边栏选择合适的模版
2. **填写表单**: 根据模版要求填写参数
3. **发送请求**: 点击"发送给 Claude"按钮
4. **查看结果**: 在对话面板中查看 Claude 的回复

---

## 📚 内置模版说明

### 🔨 开发类模版

#### 1. 新功能开发
**适用场景**: 需要设计并实现新功能时

**输入参数**:
- **功能描述**: 详细描述要实现的功能需求
- **技术栈**: 项目使用的技术栈 (如: React, TypeScript, Next.js)
- **相关代码**: 可选，粘贴相关的现有代码提供上下文

**输出内容**:
- 技术方案设计（架构、模块划分、数据流）
- 完整的代码实现
- 单元测试
- 性能与安全建议

#### 2. Bug修复助手
**适用场景**: 遇到 Bug 需要定位和修复时

**输入参数**:
- **问题代码**: 有问题的代码片段
- **编程语言**: 代码使用的语言
- **问题描述**: 具体的问题表现
- **错误日志**: 可选，相关的错误日志

**输出内容**:
- 根因分析（5W1H）
- 多个修复方案对比
- 修复后的完整代码
- 预防措施建议

---

### 👀 代码Review类模版

#### 3. 全面代码审查
**适用场景**: 需要对代码进行全面、深度的审查

**输入参数**:
- **代码变更**: 支持 git diff 格式或完整代码
- **审查级别**: quick/standard/thorough

**审查维度**:
- 🔒 安全漏洞
- ⚡ 性能问题
- 🐛 潜在 Bug
- 📖 代码可读性
- 🏗️ 架构合理性
- ✅ 测试覆盖

#### 4. PR快速审查
**适用场景**: 快速审查 PR，识别关键问题

**输入参数**:
- **PR代码变更**: git diff 内容
- **重点关注**: security/performance/logic/all

**特点**:
- 仅输出关键问题（Blocker 和 Major）
- 格式简洁，适合快速决策

---

### ♻️ 重构类模版

#### 5. 代码重构
**适用场景**: 改进代码结构，提高可维护性

**输入参数**:
- **原始代码**: 需要重构的代码
- **编程语言**: 代码语言
- **重构目标**: 提高可读性/性能优化/架构调整/消除重复/提升类型安全

**输出内容**:
- 重构计划（分步骤）
- 重构后的完整代码
- 变更对比说明
- 单元测试
- 风险评估

---

### 📚 文档类模版

#### 6. API文档生成
**适用场景**: 为函数/类生成标准化文档

**输入参数**:
- **代码**: 需要生成文档的代码
- **编程语言**: 代码语言
- **文档格式**: JSDoc/Google Style/NumPy Style/Markdown

**输出内容**:
- 函数/类概述
- 参数说明表格
- 返回值说明
- 使用示例
- 异常处理
- 注意事项

---

### 🧪 测试类模版

#### 7. 单元测试生成
**适用场景**: 为代码生成全面的单元测试

**输入参数**:
- **被测代码**: 需要测试的代码
- **编程语言**: 代码语言
- **测试框架**: vitest/jest/pytest/junit/go test

**输出内容**:
- 测试计划表格
- 完整的测试代码
- Mock 配置
- 测试覆盖率评估

**测试覆盖**:
- 正常流程
- 边界条件
- 异常情况
- 目标覆盖率: 90%+

---

## 💡 使用技巧

### 1. 提供充足的上下文
- 在"相关代码"字段粘贴相关的现有代码
- 描述问题时尽量详细，包含期望行为
- 提供完整的错误日志

### 2. 使用 Git Diff
对于 Code Review 模版，可以直接使用 git 命令:

```bash
# 获取当前变更
git diff > changes.txt

# 获取分支差异
git diff main...feature-branch > pr-diff.txt
```

然后将内容粘贴到代码输入框

### 3. 代码编辑器功能
- **Monaco Editor**: 内置了 VS Code 同款编辑器
- 支持语法高亮
- 支持代码格式化
- 可以快速编辑代码

### 4. 复制功能
- 点击消息右上角的 📋 图标可复制整个回复
- 代码块有独立的"复制代码"按钮

### 5. 历史记录
- 所有对话自动保存在浏览器本地存储
- 刷新页面不会丢失历史记录
- 可以返回编辑表单修改参数重新提交

---

## 🎯 最佳实践

### 开发新功能
1. 使用"新功能开发"模版
2. 提供详细的需求描述
3. 粘贴项目的相关代码（如现有的组件、API）
4. 明确技术栈和约束条件
5. Review 生成的代码后，使用"单元测试生成"补充测试

### Bug 修复流程
1. 使用"Bug修复助手"模版
2. 提供完整的错误栈
3. 描述复现步骤
4. 获取修复方案后，使用"代码审查"验证修复质量

### PR Review 流程
1. 使用 `git diff main...feature` 获取变更
2. 小PR用"PR快速审查"，大PR用"全面代码审查"
3. 根据反馈修改代码
4. 再次审查确认问题已解决

### 代码质量提升
1. 定期使用"代码重构"模版优化老代码
2. 使用"API文档生成"补充文档
3. 使用"单元测试生成"提升覆盖率

---

## ⚙️ 高级配置

### 自定义模版 (未来功能)
计划支持自定义模版，您可以:
- 创建自己的 prompt 模版
- 导入/导出模版
- 分享给团队使用

### API 配置
默认使用:
- 模型: `claude-sonnet-4-20250514`
- Max Tokens: 8192
- Temperature: 0.7

---

## ❓ 常见问题

### Q: API Key 安全吗？
A: API Key 存储在浏览器本地 localStorage，不会上传到任何服务器。但建议定期轮换 Key。

### Q: 支持离线使用吗？
A: 不支持。需要网络连接调用 Claude API。

### Q: 为什么我的代码没有高亮？
A: 确保在代码块中指定了语言，如 \`\`\`typescript

### Q: 如何获取 git diff？
A: 在项目目录运行 `git diff` 或 `git diff main...branch-name`

### Q: 生成的代码可以直接使用吗？
A: 建议先 Review，特别关注:
- 安全性（不要有敏感信息）
- 依赖是否存在
- 是否符合项目规范

---

## 🔧 故障排查

### 无法连接 Claude API
1. 检查 API Key 是否正确
2. 检查网络连接
3. 查看浏览器控制台错误信息

### 页面无响应
1. 刷新页面
2. 清除浏览器缓存
3. 检查是否有 JavaScript 错误

### Monaco 编辑器加载失败
1. 检查网络连接
2. 刷新页面重新加载

---

## 📞 反馈与支持

如有问题或建议，欢迎反馈！

---

**享受高效的开发体验！** 🚀
